<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BMAD Method - Interactive Workflow Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.4.0/dist/mermaid.min.js"></script>
    <!-- Tooltip library -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css" />
    <style>
      /* Enhanced styles for interactive BMAD guide */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
        min-height: 100vh;
        font-family: system-ui, -apple-system, sans-serif;
      }
      
      /* Main tab system */
      .main-tab-content {
        display: none;
        animation: fadeIn 0.3s ease;
      }
      .main-tab-content.active {
        display: block;
      }
      
      /* Sub tab system */
      .sub-tab-content {
        display: none;
        animation: fadeIn 0.3s ease;
      }
      .sub-tab-content.active {
        display: block;
      }
      
      .tab-button {
        transition: all 0.3s ease;
        cursor: pointer;
      }
      .tab-button.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #fff;
        border: 2px solid #667eea;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        transform: translateY(-2px);
      }
      .tab-button:hover:not(.active) {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        background: #475569;
      }
      
      /* Command boxes with copy functionality */
      .command-box {
        background: #1e1e1e;
        border-radius: 8px;
        border: 1px solid #4ec9b0;
        position: relative;
        overflow: hidden;
        margin: 0.5rem 0;
      }
      .command-text {
        color: #4ec9b0;
        font-family: 'Courier New', monospace;
        padding: 12px 60px 12px 16px;
        margin: 0;
        white-space: pre-wrap;
        font-size: 0.9rem;
      }
      .copy-btn {
        position: absolute;
        top: 8px;
        right: 8px;
        background: #4ec9b0;
        color: #1e1e1e;
        border: none;
        border-radius: 4px;
        padding: 4px 8px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .copy-btn:hover {
        background: #6cd4b7;
      }
      .copy-btn.copied {
        background: #28a745 !important;
        color: white !important;
      }
      
      
      /* Search functionality */
      .search-container {
        position: relative;
        max-width: 400px;
      }
      
      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        max-height: 300px;
        overflow-y: auto;
        z-index: 9999;
        display: none;
      }
      
      .search-result-item {
        padding: 12px;
        border-bottom: 1px solid #f1f5f9;
        cursor: pointer;
        transition: background-color 0.2s ease;
      }
      .search-result-item:hover {
        background: #f8fafc;
      }
      .search-result-item:last-child {
        border-bottom: none;
      }
      
      /* Export modal */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 10000;
        display: none;
        align-items: center;
        justify-content: center;
      }
      
      .modal-content {
        background: white;
        border-radius: 12px;
        padding: 24px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      }
      
      /* Progress tracker - unified colors */
      .progress-step {
        transition: all 0.3s ease;
        background: #667eea;
        color: white;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      }
      
      /* Mermaid diagram container */
      .mermaid-container {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        overflow-x: auto;
        margin: 1rem 0;
        width: 100%;
      }
      
      /* Mermaid diagram styling */
      .mermaid {
        width: 100%;
        min-height: 600px;
      }
      
      .mermaid svg {
        width: 100% !important;
        height: auto !important;
        max-width: none !important;
      }
      
      /* Skip links for accessibility */
      .skip-link {
        position: absolute;
        top: -100px;
        left: 6px;
        background: #667eea;
        color: white;
        padding: 8px;
        text-decoration: none;
        border-radius: 4px;
        z-index: 100;
        transition: top 0.3s ease;
      }
      
      .skip-link:focus {
        top: 6px;
      }
      
      /* Notification styles */
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        z-index: 10002;
        transform: translateX(400px);
        transition: transform 0.3s ease;
      }
      
      .notification.show {
        transform: translateX(0);
      }
      
      .notification.error {
        background: #ef4444;
        box-shadow: 0 4px 20px rgba(239, 68, 68, 0.3);
      }
      
      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      /* Compact layout */
      .compact-section {
        margin: 1rem 0;
        padding: 1rem;
      }
      
      .agent-card {
        background: white;
        border-radius: 8px;
        padding: 1rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        margin: 0.5rem 0;
        transition: transform 0.2s ease;
      }
      .agent-card:hover {
        transform: translateY(-2px);
      }
      
      /* Responsive design */
      @media (max-width: 768px) {
        .modal-content {
          width: 95%;
          padding: 16px;
        }
        .search-container {
          max-width: 100%;
        }
        header {
          overflow-x: hidden;
        }
        .progress-tracker {
          overflow-x: auto;
          padding: 0 1rem;
        }
      }
    </style>
  </head>
  <body class="text-lg" id="app-body">
    <!-- Skip to content links -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#navigation" class="skip-link">Skip to navigation</a>

    <!-- Header with Controls -->
    <header class="bg-gradient-to-r from-slate-900 via-purple-900 to-slate-900 py-8 shadow-2xl">
      <div class="max-w-6xl mx-auto px-6 text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 tracking-tight">
          üöÄ BMAD Method
        </h1>
        <h2 class="text-xl md:text-2xl text-purple-200 font-medium mb-6">
          Interactive Workflow Guide
        </h2>
        
        <!-- Search -->
        <div class="flex justify-center mb-6">
          <div class="search-container">
            <input 
              type="text" 
              id="search-input" 
              placeholder="Search commands, agents..." 
              class="w-full px-4 py-2 rounded-lg bg-white/20 backdrop-blur-sm text-white placeholder-gray-300 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
              aria-label="Search BMAD content"
            />
            <div id="search-results" class="search-results"></div>
          </div>
        </div>
        
        <!-- Progress Tracker -->
        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-6">
          <h3 class="text-lg font-semibold text-white mb-3">üìä BMAD Method Progress Tracker</h3>
          <div class="flex items-center justify-center space-x-2 overflow-x-auto" id="progress-tracker">
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="brief">
              <div class="text-lg mb-1">üìä</div>
              <div class="text-xs font-medium">Project Brief</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="prd">
              <div class="text-lg mb-1">üìã</div>
              <div class="text-xs font-medium">PRD</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="ux">
              <div class="text-lg mb-1">üé®</div>
              <div class="text-xs font-medium">UI/UX Spec</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="architecture">
              <div class="text-lg mb-1">üèóÔ∏è</div>
              <div class="text-xs font-medium">Architecture</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="validation">
              <div class="text-lg mb-1">‚úÖ</div>
              <div class="text-xs font-medium">PO Validation</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="sharding">
              <div class="text-lg mb-1">üìÇ</div>
              <div class="text-xs font-medium">Doc Sharding</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="stories">
              <div class="text-lg mb-1">üìù</div>
              <div class="text-xs font-medium">Stories</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="development">
              <div class="text-lg mb-1">üíª</div>
              <div class="text-xs font-medium">Development</div>
            </div>
            <div class="text-white/70">‚Üí</div>
            <div class="progress-step pending p-2 rounded-lg text-center min-w-0 flex-shrink-0" data-step="qa">
              <div class="text-lg mb-1">üß™</div>
              <div class="text-xs font-medium">QA Review</div>
            </div>
          </div>
        </div>

      </div>
    </header>

    <!-- Main Navigation Tabs -->
    <div class="max-w-6xl mx-auto px-6 mt-6" id="navigation">
      <nav class="bg-gradient-to-r from-slate-800 to-slate-700 rounded-xl shadow-xl p-3 border border-slate-600 sticky top-4 z-50">
        <div class="flex gap-2 justify-center flex-wrap" role="tablist" aria-label="BMAD main tabs">
          <button
            id="tab-overview"
            onclick="showMainTab('overview')"
            role="tab"
            aria-controls="overview-tab"
            aria-selected="true"
            class="tab-button active px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-purple-500"
          >
            <span class="text-lg">üìñ</span>
            <span>Overview</span>
          </button>
          <button
            id="tab-planning"
            onclick="showMainTab('planning')"
            role="tab"
            aria-controls="planning-tab"
            aria-selected="false"
            class="tab-button px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 text-slate-300 focus:outline-none focus:ring-2 focus:ring-purple-500"
          >
            <span class="text-lg">üìã</span>
            <span>Planning</span>
          </button>
          <button
            id="tab-development"
            onclick="showMainTab('development')"
            role="tab"
            aria-controls="development-tab"
            aria-selected="false"
            class="tab-button px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 text-slate-300 focus:outline-none focus:ring-2 focus:ring-purple-500"
          >
            <span class="text-lg">üî®</span>
            <span>Development</span>
          </button>
          <button
            id="tab-commands"
            onclick="showMainTab('commands')"
            role="tab"
            aria-controls="commands-tab"
            aria-selected="false"
            class="tab-button px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 text-slate-300 focus:outline-none focus:ring-2 focus:ring-purple-500"
          >
            <span class="text-lg">‚å®Ô∏è</span>
            <span>Commands</span>
          </button>
        </div>
      </nav>
    </div>

    <!-- Main Content Container -->
    <div class="max-w-6xl mx-auto px-6 pb-16 mt-6" id="main-content">
      <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl ring-1 ring-black/10 p-6 space-y-6">
        
        <!-- OVERVIEW TAB -->
        <div id="overview-tab" class="main-tab-content active">
          <!-- Quick Start Guide -->
          <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4">üöÄ Welcome to BMAD Method</h2>
            <p class="text-lg mb-4 opacity-90">
              AI-driven development framework that transforms ideas into production-ready applications.
            </p>
            <div class="grid md:grid-cols-2 gap-4">
              <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4">
                <h3 class="font-semibold mb-2">üå± New Project (Greenfield)</h3>
                <ol class="space-y-1 text-sm opacity-90">
                  <li>1. Start with Planning Phase</li>
                  <li>2. Use AI agents for analysis</li>
                  <li>3. Move to Development Cycle</li>
                  <li>4. Deploy with DevOps agent</li>
                </ol>
              </div>
              <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4">
                <h3 class="font-semibold mb-2">üèóÔ∏è Existing Project (Brownfield)</h3>
                <ol class="space-y-1 text-sm opacity-90">
                  <li>1. Analyze existing codebase</li>
                  <li>2. Create enhancement PRD</li>
                  <li>3. Plan integration strategy</li>
                  <li>4. Use incremental deployment</li>
                </ol>
              </div>
            </div>
          </div>


          <!-- BMAD Workflow Diagram -->
          <div class="mermaid-container">
            <h3 class="text-xl font-semibold text-gray-700 mb-4 text-center">üîÑ Complete BMAD Workflow</h3>
            <div class="mermaid">
              graph TD
                  subgraph planning ["üéØ Planning Phase"]
                      direction TB
                      A["üìä Project Brief"] --> B["üìã Product Requirements/PRD"]
                      B --> B1["üé® UI/UX Specification"]
                      B1 --> C["üèóÔ∏è Technical Architecture"]
                      C --> C1["‚úÖ PO Validation"]
                      C1 --> C2["üìÇ Document Sharding"]
                      
                      A1["üë§ Analyst"] -.-> A
                      PM["üë§ Product Manager"] -.-> B
                      UX["üë§ UX Expert"] -.-> B1
                      AR["üë§ Architect"] -.-> C
                      PO["üë§ Product Owner"] -.-> C1
                      PO -.-> C2
                  end
                  
                  planning -->|Switch to IDE| development
                  
                  subgraph development ["‚öôÔ∏è Development Cycle"]
                      direction TB
                      
                      %% Left side: Vertical workflow
                      subgraph workflow [" "]
                          direction TB
                          D["üìù Story Creation"]
                          E["üíª Development/Implementation"]
                          F["üß™ QA Review"]
                          F1["üì¶ Commit Changes"]
                          G["üöÄ DevOps Deployment"]
                          H{"üîÑ More Stories?"}
                          I["üéâ Project Complete"]
                          
                          D --> E
                          E --> F
                          F --> F1
                          F1 --> G
                          G --> H
                          H -->|Yes| D
                          H -->|No| I
                      end
                      
                      %% Right side: Personas
                      subgraph personas [" "]
                          direction TB
                          SM["üë§ Scrum Master"]
                          DEV["üë§ Developer"]
                          QA1["üë§ QA Engineer"]
                          DO["üë§ DevOps"]
                      end
                      
                      %% Connections from personas to workflow
                      SM -.-> D
                      DEV -.-> E
                      DEV -.-> F1
                      QA1 -.-> F
                      DO -.-> G
                      
                      style workflow fill:transparent,stroke:transparent
                      style personas fill:transparent,stroke:transparent
                  end
                  
                  style planning fill:#e8f4f8,stroke:#2563eb,stroke-width:3px
                  style development fill:#f0fdf4,stroke:#16a34a,stroke-width:3px
                  
                  style A fill:#fff3e0,stroke:#ff8f00,stroke-width:2px
                  style B fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
                  style B1 fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
                  style C fill:#fff8e1,stroke:#ffa000,stroke-width:2px
                  style C1 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
                  style C2 fill:#fafafa,stroke:#616161,stroke-width:2px
                  
                  style D fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
                  style E fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
                  style F fill:#fce4ec,stroke:#e91e63,stroke-width:2px
                  style F1 fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
                  style G fill:#fff3e0,stroke:#ff8f00,stroke-width:2px
                  style H fill:#e0f2f1,stroke:#00695c,stroke-width:2px
                  style I fill:#e8f5e8,stroke:#388e3c,stroke-width:3px
                  
                  style A1 fill:#ffc107,stroke:#f57f17,stroke-width:3px
                  style PM fill:#4caf50,stroke:#2e7d32,stroke-width:3px,color:#fff
                  style UX fill:#9c27b0,stroke:#7b1fa2,stroke-width:3px,color:#fff
                  style AR fill:#ff9800,stroke:#f57c00,stroke-width:3px,color:#fff
                  style PO fill:#2196f3,stroke:#1976d2,stroke-width:3px,color:#fff
                  style SM fill:#4caf50,stroke:#388e3c,stroke-width:3px,color:#fff
                  style DEV fill:#673ab7,stroke:#512da8,stroke-width:3px,color:#fff
                  style QA1 fill:#e91e63,stroke:#c2185b,stroke-width:3px,color:#fff
                  style DO fill:#ff5722,stroke:#d84315,stroke-width:3px,color:#fff
            </div>
          </div>

          <!-- Command History -->
          <div class="bg-gray-50 rounded-xl p-4">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-lg font-semibold text-gray-800">üìù Recent Commands</h3>
              <button id="clear-history" class="text-gray-500 hover:text-gray-700 text-sm underline">Clear</button>
            </div>
            <div id="command-history" class="max-h-32 overflow-y-auto" aria-live="polite">
              <p class="text-gray-500 text-sm italic">No commands used yet. Commands you copy will appear here.</p>
            </div>
          </div>
        </div>

        <!-- PLANNING TAB -->
        <div id="planning-tab" class="main-tab-content">
          <!-- Planning Sub-tabs -->
          <div class="flex flex-wrap gap-2 mb-6 border-b">
            <button onclick="showSubTab('planning', 'agents')" class="sub-tab-btn active px-4 py-2 font-medium border-b-2 border-blue-500 text-blue-600">
              Agents
            </button>
            <button onclick="showSubTab('planning', 'greenfield')" class="sub-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700">
              Greenfield
            </button>
            <button onclick="showSubTab('planning', 'brownfield')" class="sub-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700">
              Brownfield
            </button>
          </div>

          <!-- Planning Agents -->
          <div id="planning-agents" class="sub-tab-content active">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ü§ñ Planning Phase AI Agents</h2>
            <div class="grid md:grid-cols-2 gap-4">
              
              <!-- Analyst Agent -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-xl">üìä</div>
                  <div>
                    <h4 class="font-bold text-gray-800">Analyst</h4>
                    <p class="text-sm text-gray-600">Research & Analysis</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">Market research, brainstorming, and competitive analysis.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@analyst brainstorm "task management app"</div>
                    <button class="copy-btn" onclick="copyCommand(this)" data-tooltip="Copy to clipboard">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@analyst create-project-brief</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

              <!-- PM Agent -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-xl">üìã</div>
                  <div>
                    <h4 class="font-bold text-gray-800">Product Manager</h4>
                    <p class="text-sm text-gray-600">Requirements</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">PRD creation, user stories, and technical assumptions.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@pm create-doc prd</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@pm brownfield-create-epic</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

              <!-- Architect Agent -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center text-xl">üèóÔ∏è</div>
                  <div>
                    <h4 class="font-bold text-gray-800">Architect</h4>
                    <p class="text-sm text-gray-600">Technical Design</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">System design, API specs, and database schema.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@architect create-doc architecture</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@architect document-project</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

              <!-- UX Expert Agent -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-xl">üé®</div>
                  <div>
                    <h4 class="font-bold text-gray-800">UX Expert</h4>
                    <p class="text-sm text-gray-600">UI/UX Design</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">UI/UX specifications, wireframes, and design systems.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@ux-expert create-front-end-spec</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@ux-expert generate-ui-prompt</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

              <!-- Product Owner Agent -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-xl">‚úÖ</div>
                  <div>
                    <h4 class="font-bold text-gray-800">Product Owner</h4>
                    <p class="text-sm text-gray-600">Validation</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">Document validation and sharding for development.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@po execute-checklist-po</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@po shard docs/prd.md to prd</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>
              
            </div>
          </div>

          <!-- Greenfield Planning -->
          <div id="planning-greenfield" class="sub-tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üå± Greenfield Planning Process</h2>
            <p class="text-gray-600 mb-6">Complete planning workflow for new projects from scratch.</p>
            
            <div class="space-y-4">
              <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-blue-800 mb-2">Step 1: Project Brief & Analysis</h3>
                <p class="text-blue-700 mb-3"><strong>Agent:</strong> Analyst</p>
                <p class="text-blue-700 mb-2">Optional brainstorming and market research, then create project brief.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@analyst brainstorm "I want to build a task management app"</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@analyst create-project-brief</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
                <div class="mt-2 text-sm text-blue-600 bg-blue-100 p-2 rounded">
                  <strong>Output:</strong> project-brief.md ‚Üí Save as docs/project-brief.md
                </div>
              </div>

              <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-green-800 mb-2">Step 2: Product Requirements Document</h3>
                <p class="text-green-700 mb-3"><strong>Agent:</strong> Product Manager (PM)</p>
                <p class="text-green-700 mb-2">Create detailed product requirements with user stories.</p>
                <div class="command-box">
                  <div class="command-text">@pm create-doc prd</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="mt-2 text-sm text-green-600 bg-green-100 p-2 rounded">
                  <strong>Output:</strong> prd.md ‚Üí Save as docs/prd.md
                </div>
              </div>

              <div class="bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-purple-800 mb-2">Step 3: UI/UX Specification (If UI Required)</h3>
                <p class="text-purple-700 mb-3"><strong>Agent:</strong> UX Expert</p>
                <p class="text-purple-700 mb-2">Design user interface and user experience specifications.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@ux-expert create-front-end-spec</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@ux-expert generate-ui-prompt</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
                <div class="mt-2 text-sm text-purple-600 bg-purple-100 p-2 rounded">
                  <strong>Output:</strong> front-end-spec.md ‚Üí Save as docs/front-end-spec.md
                </div>
              </div>

              <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-yellow-800 mb-2">Step 4: Technical Architecture</h3>
                <p class="text-yellow-700 mb-3"><strong>Agent:</strong> Architect</p>
                <p class="text-yellow-700 mb-2">Choose based on project type:</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@architect create-doc fullstack-architecture</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@architect create-doc architecture</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@architect create-doc front-end-architecture</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
                <div class="mt-2 text-sm text-yellow-600 bg-yellow-100 p-2 rounded">
                  <strong>Output:</strong> architecture.md ‚Üí Save as docs/architecture.md
                </div>
              </div>

              <div class="bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-indigo-800 mb-2">Step 5: PO Validation</h3>
                <p class="text-indigo-700 mb-3"><strong>Agent:</strong> Product Owner (PO)</p>
                <p class="text-indigo-700 mb-2">Validate all planning documents before development.</p>
                <div class="command-box">
                  <div class="command-text">@po execute-checklist-po</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="mt-2 text-sm text-indigo-600 bg-indigo-100 p-2 rounded">
                  <strong>Output:</strong> Validation report - may require returning to previous agents
                </div>
              </div>

              <div class="bg-gray-50 border-l-4 border-gray-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-gray-800 mb-2">Step 6: Switch to IDE for Development</h3>
                <p class="text-gray-700 mb-2"><strong>Critical:</strong> Switch to your IDE (Cursor, VS Code) for development phase.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@po shard docs/prd.md to prd</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@po shard docs/architecture.md to architecture</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
                <div class="mt-2 text-sm text-gray-600 bg-gray-100 p-2 rounded">
                  <strong>Output:</strong> docs/prd/ and docs/architecture/ folders with sharded sections
                </div>
              </div>
            </div>
          </div>

          <!-- Brownfield Planning -->
          <div id="planning-brownfield" class="sub-tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üèóÔ∏è Brownfield Planning Process</h2>
            <p class="text-gray-600 mb-6">Enhancing existing projects with careful integration.</p>
            
            <!-- Step 1: Always Start Here -->
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg mb-6">
              <h3 class="font-semibold text-blue-800 mb-2">Step 1: Enhancement Classification</h3>
              <p class="text-blue-700 mb-3"><strong>Agent:</strong> Analyst</p>
              <p class="text-blue-700 mb-2">First, classify the type and scope of enhancement needed.</p>
              <div class="command-box">
                <div class="command-text">@analyst "I need to add payment processing to my existing Node.js app"</div>
                <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
              </div>
              <div class="mt-3 text-sm text-blue-600 bg-blue-100 p-2 rounded">
                The analyst will determine which path (A, B, or C) you should follow
              </div>
            </div>

            <!-- Decision Box -->
            <div class="bg-amber-50 border border-amber-300 p-4 rounded-lg mb-6">
              <h3 class="font-semibold text-amber-800 mb-3">üìç Choose Your Path Based on Scope</h3>
              <div class="grid md:grid-cols-3 gap-4">
                <div class="text-center p-3 bg-white rounded-lg border border-amber-200">
                  <div class="text-2xl mb-2">‚ö°</div>
                  <h4 class="font-bold text-amber-900">Path A</h4>
                  <p class="text-sm text-amber-700">Quick Story</p>
                  <p class="text-xs text-amber-600 mt-1">< 4 hours work</p>
                </div>
                <div class="text-center p-3 bg-white rounded-lg border border-amber-200">
                  <div class="text-2xl mb-2">üì¶</div>
                  <h4 class="font-bold text-amber-900">Path B</h4>
                  <p class="text-sm text-amber-700">Small Feature</p>
                  <p class="text-xs text-amber-600 mt-1">1-3 stories</p>
                </div>
                <div class="text-center p-3 bg-white rounded-lg border border-amber-200">
                  <div class="text-2xl mb-2">üè≠</div>
                  <h4 class="font-bold text-amber-900">Path C</h4>
                  <p class="text-sm text-amber-700">Major Enhancement</p>
                  <p class="text-xs text-amber-600 mt-1">Full workflow</p>
                </div>
              </div>
            </div>

            <!-- Path A: Quick Single Story -->
            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm">Path A</span>
                Quick Single Story (Simple Changes)
              </h3>
              <div class="ml-8 space-y-4">
                <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg">
                  <h4 class="font-semibold text-green-800 mb-2">Step 2: Create Single Story</h4>
                  <p class="text-green-700 mb-3"><strong>Agent:</strong> Product Manager (PM)</p>
                  <div class="command-box">
                    <div class="command-text">@pm brownfield-create-story</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="mt-2 text-sm text-green-600 bg-green-100 p-2 rounded">
                    <strong>Next:</strong> Skip directly to Development Cycle with single story
                  </div>
                </div>
              </div>
            </div>

            <!-- Path B: Small Feature -->
            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm">Path B</span>
                Small Feature (1-3 Stories)
              </h3>
              <div class="ml-8 space-y-4">
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                  <h4 class="font-semibold text-blue-800 mb-2">Step 2: Create Epic</h4>
                  <p class="text-blue-700 mb-3"><strong>Agent:</strong> Product Manager (PM)</p>
                  <div class="command-box">
                    <div class="command-text">@pm brownfield-create-epic</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="mt-2 text-sm text-blue-600 bg-blue-100 p-2 rounded">
                    <strong>Next:</strong> Skip directly to Development Cycle with focused epic
                  </div>
                </div>
              </div>
            </div>

            <!-- Path C: Major Enhancement -->
            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="bg-purple-500 text-white px-3 py-1 rounded-full text-sm">Path C</span>
                Major Enhancement (Full Workflow)
              </h3>
              <div class="ml-8 space-y-4">
                <div class="bg-orange-50 border-l-4 border-orange-500 p-4 rounded-r-lg">
                  <h4 class="font-semibold text-orange-800 mb-2">Step 2: Existing Project Analysis</h4>
                  <p class="text-orange-700 mb-3"><strong>Agent:</strong> Architect</p>
                  <p class="text-orange-700 mb-2">Upload entire project or provide GitHub URL for analysis.</p>
                  <div class="command-box">
                    <div class="command-text">@architect document-project</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="mt-2 text-sm text-orange-600 bg-orange-100 p-2 rounded">
                    <strong>Output:</strong> brownfield-architecture.md ‚Üí Current state analysis
                  </div>
                </div>

                <div class="bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-lg">
                  <h4 class="font-semibold text-purple-800 mb-2">Step 3: Enhancement PRD</h4>
                  <p class="text-purple-700 mb-3"><strong>Agent:</strong> Product Manager (PM)</p>
                  <p class="text-purple-700 mb-2">Create enhancement-specific requirements with integration focus.</p>
                  <div class="command-box">
                    <div class="command-text">@pm create-doc brownfield-prd</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="mt-2 text-sm text-purple-600 bg-purple-100 p-2 rounded">
                    <strong>Output:</strong> prd.md ‚Üí Save as docs/prd.md
                  </div>
                </div>

                <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-r-lg">
                  <h4 class="font-semibold text-yellow-800 mb-2">Step 4: Enhancement Architecture (Optional)</h4>
                  <p class="text-yellow-700 mb-3"><strong>Agent:</strong> Architect</p>
                  <p class="text-yellow-700 mb-2">Only if architectural changes are needed:</p>
                  <div class="command-box">
                    <div class="command-text">@architect create-doc brownfield-architecture</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="mt-2 text-sm text-yellow-600 bg-yellow-100 p-2 rounded">
                    <strong>Output:</strong> architecture.md ‚Üí Integration approach and compatibility
                  </div>
                </div>

                <div class="bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded-r-lg">
                  <h4 class="font-semibold text-indigo-800 mb-2">Step 5: PO Validation</h4>
                  <p class="text-indigo-700 mb-3"><strong>Agent:</strong> Product Owner (PO)</p>
                  <p class="text-indigo-700 mb-2">Focus on integration safety and compatibility.</p>
                  <div class="command-box">
                    <div class="command-text">@po execute-checklist-po</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="mt-2 text-sm text-indigo-600 bg-indigo-100 p-2 rounded">
                    <strong>Focus:</strong> Integration safety, compatibility, rollback procedures
                  </div>
                </div>

                <div class="bg-gray-50 border-l-4 border-gray-500 p-4 rounded-r-lg">
                  <h4 class="font-semibold text-gray-800 mb-2">Step 6: Switch to IDE & Shard Documents</h4>
                <p class="text-gray-700 mb-2"><strong>Critical:</strong> Switch to your IDE (Cursor, VS Code) for development phase.</p>
                  <div class="space-y-2">
                    <div class="command-box">
                      <div class="command-text">@po shard docs/prd.md to prd</div>
                      <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                    </div>
                    <div class="command-box">
                      <div class="command-text">@po shard docs/architecture.md to architecture</div>
                      <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                    </div>
                  </div>

<div class="mt-2 text-sm text-gray-600 bg-gray-100 p-2 rounded">
                  <strong>Output:</strong> docs/prd/ and docs/architecture/ folders with sharded sections
                </div>

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- DEVELOPMENT TAB -->
        <div id="development-tab" class="main-tab-content">
          <!-- Development Sub-tabs -->
          <div class="flex flex-wrap gap-2 mb-6 border-b">
            <button onclick="showSubTab('development', 'agents')" class="sub-tab-btn active px-4 py-2 font-medium border-b-2 border-blue-500 text-blue-600">
              Agents
            </button>
            <button onclick="showSubTab('development', 'workflow')" class="sub-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700">
              Workflow
            </button>
            <button onclick="showSubTab('development', 'deployment')" class="sub-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700">
              Deployment
            </button>
          </div>

          <!-- Development Agents -->
          <div id="development-agents" class="sub-tab-content active">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üî® Development Cycle AI Agents</h2>
            <div class="grid md:grid-cols-2 gap-4">
              
              <!-- Scrum Master -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-xl">üìä</div>
                  <div>
                    <h4 class="font-bold text-gray-800">Scrum Master</h4>
                    <p class="text-sm text-gray-600">Story Management</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">Creates user stories and manages sprints.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@sm *create</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@sm create-next-story</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

              <!-- Developer -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-xl">üíª</div>
                  <div>
                    <h4 class="font-bold text-gray-800">Developer</h4>
                    <p class="text-sm text-gray-600">Implementation</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">Implements features and writes code.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@dev implement-story</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@dev commit-work --story USER-001</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

              <!-- QA Engineer -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center text-xl">üß™</div>
                  <div>
                    <h4 class="font-bold text-gray-800">QA Engineer</h4>
                    <p class="text-sm text-gray-600">Quality Assurance</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">Code review and testing.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@qa review-story docs/stories/story-1.1.md</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@qa review-pr --pr 123</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

              <!-- DevOps -->
              <div class="agent-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center text-xl">üöÄ</div>
                  <div>
                    <h4 class="font-bold text-gray-800">DevOps</h4>
                    <p class="text-sm text-gray-600">Deployment</p>
                  </div>
                </div>
                <p class="text-gray-700 mb-3 text-sm">Build, deploy, and monitor applications.</p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@devops deploy --environment staging</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="command-box">
                    <div class="command-text">@devops deploy --strategy canary</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                </div>
              </div>

            </div>
          </div>

          <!-- Development Workflow -->
          <div id="development-workflow" class="sub-tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üîÑ Development Workflow (IDE Only)</h2>
            <p class="text-gray-600 mb-6">Iterative story implementation - same for both Greenfield and Brownfield.</p>
            
            <div class="bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg mb-6">
              <h3 class="font-semibold text-amber-800 mb-2">‚ö†Ô∏è Critical Context Management</h3>
              <p class="text-amber-700">ALWAYS start a new chat between SM, Dev, and QA work to maintain clean context windows!</p>
            </div>

            <div class="space-y-4">
              <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-green-800 mb-2">Step 1: Story Creation</h3>
                <p class="text-green-700 mb-3"><strong>Agent:</strong> Scrum Master (SM) | <strong>üÜï START NEW CLEAN CHAT</strong></p>
                <div class="space-y-2">
                  <div class="command-box">
                    <div class="command-text">@sm *create</div>
                    <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                  </div>
                  <div class="text-sm text-green-600">For brownfield without sharding, use brownfield-create-story task</div>
                </div>
                <div class="mt-2 text-sm text-green-600 bg-green-100 p-2 rounded">
                  <strong>Output:</strong> story-1.1.md in docs/stories/ | Status: Draft ‚Üí Review & approve ‚Üí Approved
                </div>
              </div>

              <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-blue-800 mb-2">Step 2: Story Implementation</h3>
                <p class="text-blue-700 mb-3"><strong>Agent:</strong> Developer (Dev) | <strong>üÜï START NEW CLEAN CHAT</strong></p>
                <div class="command-box">
                  <div class="command-text">@dev implement-story</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="mt-2 text-sm text-blue-600 bg-blue-100 p-2 rounded">
                  <strong>Dev Actions:</strong> Implement all tasks, create/modify files, write tests, update File List, mark story as "Review"
                </div>
              </div>

              <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-red-800 mb-2">Step 3: QA Review (Recommended)</h3>
                <p class="text-red-700 mb-3"><strong>Agent:</strong> QA Engineer | <strong>üÜï START NEW CLEAN CHAT</strong></p>
                <div class="command-box">
                  <div class="command-text">@qa review-story docs/stories/story-1.1.md</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="mt-2 text-sm text-red-600 bg-red-100 p-2 rounded">
                  <strong>QA Actions:</strong> Senior dev code review, fix small issues, leave checklist for remaining items, update story status
                </div>
              </div>

              <div class="bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-purple-800 mb-2">Step 4: Commit Changes</h3>
                <p class="text-purple-700 mb-3"><strong>Agent:</strong> Developer (Dev) | Return to Dev chat if QA issues remain</p>
                <div class="command-box">
                  <div class="command-text">@dev commit-work --story USER-001</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>

              <div class="bg-gray-50 border-l-4 border-gray-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-gray-800 mb-2">Step 5: Repeat Cycle</h3>
                <p class="text-gray-700 mb-2">Continue SM ‚Üí Dev ‚Üí QA cycle for each story until all epic stories are complete.</p>
                <div class="mt-2 text-sm text-gray-600 bg-gray-100 p-2 rounded">
                  <strong>Remember:</strong> Only 1 story in progress at a time. Complete each story before starting the next!
                </div>
              </div>
            </div>

            
          </div>

          <!-- Deployment Strategies -->
          <div id="development-deployment" class="sub-tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">üöÄ Deployment Strategies</h2>
            <div class="grid gap-4">
              <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-green-800 mb-2">Blue-Green Deployment</h3>
                <p class="text-green-700 mb-2">Zero-downtime deployment with instant rollback.</p>
                <div class="command-box">
                  <div class="command-text">@devops deploy --strategy blue-green --environment production</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>

              <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-blue-800 mb-2">Canary Deployment</h3>
                <p class="text-blue-700 mb-2">Gradual rollout to percentage of users.</p>
                <div class="command-box">
                  <div class="command-text">@devops deploy --strategy canary --percentage 10</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>

              <div class="bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-lg">
                <h3 class="font-semibold text-purple-800 mb-2">Rolling Deployment</h3>
                <p class="text-purple-700 mb-2">Gradual update of instances.</p>
                <div class="command-box">
                  <div class="command-text">@devops deploy --strategy rolling</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- COMMANDS TAB -->
        <div id="commands-tab" class="main-tab-content">
          <h2 class="text-2xl font-bold text-gray-800 mb-4">‚å®Ô∏è Quick Command Reference</h2>
          
          <div class="grid md:grid-cols-2 gap-6">
            <!-- Analyst Commands -->
            <div class="bg-blue-50 rounded-xl p-4">
              <h3 class="text-xl font-semibold text-blue-800 mb-3">üìä Analyst Commands</h3>
              <div class="space-y-2">
                <div class="command-box">
                  <div class="command-text">@analyst brainstorm "I want to build a task management app"</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@analyst create-project-brief</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@analyst "I need to add payment processing to my existing Node.js app"</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>
            </div>

            <!-- PM Commands -->
            <div class="bg-green-50 rounded-xl p-4">
              <h3 class="text-xl font-semibold text-green-800 mb-3">üìã Product Manager Commands</h3>
              <div class="space-y-2">
                <div class="command-box">
                  <div class="command-text">@pm create-doc prd</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@pm brownfield-create-epic</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@pm brownfield-create-story</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@pm create-doc brownfield-prd</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>
            </div>

            <!-- UX Expert Commands -->
            <div class="bg-purple-50 rounded-xl p-4">
              <h3 class="text-xl font-semibold text-purple-800 mb-3">üé® UX Expert Commands</h3>
              <div class="space-y-2">
                <div class="command-box">
                  <div class="command-text">@ux-expert create-front-end-spec</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@ux-expert generate-ui-prompt</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>
            </div>

            <!-- Architect Commands -->
            <div class="bg-yellow-50 rounded-xl p-4">
              <h3 class="text-xl font-semibold text-yellow-800 mb-3">üèóÔ∏è Architect Commands</h3>
              <div class="space-y-2">
                <div class="command-box">
                  <div class="command-text">@architect create-doc fullstack-architecture</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@architect create-doc architecture</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@architect create-doc front-end-architecture</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@architect document-project</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@architect create-doc brownfield-architecture</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>
            </div>

            <!-- PO Commands -->
            <div class="bg-indigo-50 rounded-xl p-4">
              <h3 class="text-xl font-semibold text-indigo-800 mb-3">‚úÖ Product Owner Commands</h3>
              <div class="space-y-2">
                <div class="command-box">
                  <div class="command-text">@po execute-checklist-po</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@po shard docs/prd.md to prd</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@po shard docs/architecture.md to architecture</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>
            </div>

            <!-- Development Commands -->
            <div class="bg-teal-50 rounded-xl p-4">
              <h3 class="text-xl font-semibold text-teal-800 mb-3">üîÑ Development Cycle Commands</h3>
              <div class="space-y-2">
                <div class="command-box">
                  <div class="command-text">@sm *create</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@sm create-next-story</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@dev implement-story</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@dev commit-work --story USER-001</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
                <div class="command-box">
                  <div class="command-text">@qa review-story docs/stories/story-1.1.md</div>
                  <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Best Practices -->
          <div class="mt-6 bg-gray-50 rounded-xl p-4">
            <h3 class="text-xl font-semibold text-gray-800 mb-3">üí° Best Practices</h3>
            <ul class="space-y-2 text-gray-700">
              <li class="flex items-start gap-2">
                <span class="text-green-500">‚úì</span>
                <span>Start with planning phase before development</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-500">‚úì</span>
                <span>Use clean context between agent interactions</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-500">‚úì</span>
                <span>Test deployments with canary releases first</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-500">‚úì</span>
                <span>Keep PRD and Architecture as single source of truth</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>


    <!-- Notification Container -->
    <div id="notification" class="notification" role="alert" aria-live="assertive"></div>

    <!-- JavaScript for Interactive Functionality -->
    <script>
      // Global state management
      let commandHistory = JSON.parse(localStorage.getItem('bmad-command-history') || '[]');
      let progressState = JSON.parse(localStorage.getItem('bmad-progress') || '{}');
      let currentMainTab = 'overview';
      let currentSubTabs = { planning: 'agents', development: 'agents' };
      
      // Initialize tooltips
      function initTooltips() {
        if (typeof tippy !== 'undefined') {
          tippy('[data-tooltip]', {
            content(reference) {
              return reference.getAttribute('data-tooltip');
            },
            animation: 'scale',
            theme: 'dark',
            placement: 'top'
          });
        }
      }

      // Initialize Mermaid diagrams
      function initMermaid() {
        if (typeof mermaid !== 'undefined') {
          mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
              primaryColor: '#667eea',
              primaryTextColor: '#1e293b',
              primaryBorderColor: '#4f46e5',
              lineColor: '#6b7280',
              secondaryColor: '#f1f5f9',
              tertiaryColor: '#fef3c7'
            }
          });
        }
      }

      // Main tab switching functionality
      function showMainTab(tabId) {
        currentMainTab = tabId;
        
        // Hide all main tab contents
        document.querySelectorAll('.main-tab-content').forEach(content => {
          content.classList.remove('active');
        });
        
        // Remove active class from all main tab buttons
        document.querySelectorAll('#navigation .tab-button').forEach(btn => {
          btn.classList.remove('active');
          btn.setAttribute('aria-selected', 'false');
          btn.classList.add('text-slate-300');
        });
        
        // Show selected main tab content
        document.getElementById(tabId + '-tab').classList.add('active');
        
        // Activate selected main tab button
        const activeBtn = document.getElementById('tab-' + tabId);
        activeBtn.classList.add('active');
        activeBtn.setAttribute('aria-selected', 'true');
        activeBtn.classList.remove('text-slate-300');
        
        // Update progress tracker based on tab
        updateProgressTracker(tabId);
        
        // Re-initialize Mermaid for newly visible diagrams
        setTimeout(() => {
          if (typeof mermaid !== 'undefined') {
            mermaid.init();
          }
        }, 100);
      }

      // Sub-tab switching functionality
      function showSubTab(parentTab, subTabId) {
        currentSubTabs[parentTab] = subTabId;
        
        // Hide all sub-tab contents in the parent tab
        document.querySelectorAll(`#${parentTab}-tab .sub-tab-content`).forEach(content => {
          content.classList.remove('active');
        });
        
        // Remove active class from all sub-tab buttons in the parent tab
        document.querySelectorAll(`#${parentTab}-tab .sub-tab-btn`).forEach(btn => {
          btn.classList.remove('active', 'border-blue-500', 'text-blue-600');
          btn.classList.add('text-gray-500');
        });
        
        // Show selected sub-tab content
        document.getElementById(`${parentTab}-${subTabId}`).classList.add('active');
        
        // Activate selected sub-tab button
        const activeBtn = event.target;
        activeBtn.classList.add('active', 'border-b-2', 'border-blue-500', 'text-blue-600');
        activeBtn.classList.remove('text-gray-500');
      }

      // Enhanced command copy functionality with history tracking
      function copyCommand(button) {
        const commandText = button.previousElementSibling.textContent.trim();
        
        navigator.clipboard.writeText(commandText).then(() => {
          // Add to command history
          addToCommandHistory(commandText);
          
          // Visual feedback
          const originalText = button.textContent;
          button.textContent = 'Copied!';
          button.classList.add('copied');
          
          // Show notification
          showNotification('Command copied to clipboard!', 'success');
          
          // Reset after 2 seconds
          setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove('copied');
          }, 2000);
        }).catch(err => {
          console.error('Failed to copy: ', err);
          button.textContent = 'Error';
          showNotification('Failed to copy command', 'error');
          setTimeout(() => {
            button.textContent = 'Copy';
          }, 2000);
        });
      }

      // Command history management
      function addToCommandHistory(command) {
        const timestamp = new Date().toLocaleString();
        commandHistory.unshift({ command, timestamp });
        
        // Keep only last 10 commands for compact display
        if (commandHistory.length > 10) {
          commandHistory = commandHistory.slice(0, 10);
        }
        
        localStorage.setItem('bmad-command-history', JSON.stringify(commandHistory));
        updateCommandHistoryDisplay();
      }

      function updateCommandHistoryDisplay() {
        const historyContainer = document.getElementById('command-history');
        if (!historyContainer) return;
        
        if (commandHistory.length === 0) {
          historyContainer.innerHTML = '<p class="text-gray-500 text-sm italic">No commands used yet. Commands you copy will appear here.</p>';
          return;
        }
        
        const historyHtml = commandHistory.map(item => `
          <div class="flex items-center justify-between py-2 px-3 bg-white rounded mb-2 shadow-sm border text-sm">
            <div class="flex-1 min-w-0">
              <code class="text-gray-800 text-xs block truncate">${item.command}</code>
              <div class="text-xs text-gray-500">${item.timestamp}</div>
            </div>
            <button onclick="copyHistoryCommand('${item.command.replace(/'/g, "\\'")}', this)" 
                    class="ml-2 text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded hover:bg-blue-50 transition-colors flex-shrink-0">
              Copy
            </button>
          </div>
        `).join('');
        
        historyContainer.innerHTML = historyHtml;
      }

      function copyHistoryCommand(command, button) {
        navigator.clipboard.writeText(command).then(() => {
          button.textContent = 'Copied!';
          showNotification('Command copied from history!', 'success');
          setTimeout(() => button.textContent = 'Copy', 1500);
        });
      }

      function clearCommandHistory() {
        commandHistory = [];
        localStorage.removeItem('bmad-command-history');
        updateCommandHistoryDisplay();
        showNotification('Command history cleared', 'success');
      }

      // Progress tracker functionality
      function updateProgressTracker(activeTab = null) {
        const steps = document.querySelectorAll('.progress-step');
        
        if (activeTab === 'development') {
          // Mark planning steps as completed when in development
          ['brief', 'prd', 'ux', 'architecture', 'validation', 'sharding'].forEach(step => {
            progressState[step] = 'completed';
          });
          progressState['stories'] = 'active';
        } else if (activeTab === 'planning') {
          progressState['brief'] = 'active';
        }
        
        steps.forEach(step => {
          const stepName = step.dataset.step;
          const state = progressState[stepName] || 'pending';
          
          step.className = `progress-step ${state} p-2 rounded-lg text-center min-w-0 flex-shrink-0 transition-all duration-300`;
        });
        
        localStorage.setItem('bmad-progress', JSON.stringify(progressState));
      }

      function markProgressStep(stepName, state = 'completed') {
        progressState[stepName] = state;
        updateProgressTracker();
        showNotification(`Progress updated: ${stepName} ${state}`, 'success');
      }

      function resetProgress() {
        progressState = {};
        localStorage.removeItem('bmad-progress');
        updateProgressTracker();
        showNotification('Progress tracker reset', 'success');
      }

      // Search functionality
      function initSearch() {
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        
        if (!searchInput || !searchResults) return;
        
        let searchTimeout;
        
        searchInput.addEventListener('input', function(e) {
          clearTimeout(searchTimeout);
          const query = e.target.value.trim().toLowerCase();
          
          if (query.length < 2) {
            searchResults.style.display = 'none';
            return;
          }
          
          searchTimeout = setTimeout(() => performSearch(query, searchResults), 300);
        });
        
        searchInput.addEventListener('blur', function() {
          setTimeout(() => {
            searchResults.style.display = 'none';
          }, 200);
        });
        
        searchInput.addEventListener('focus', function() {
          if (this.value.trim().length >= 2) {
            performSearch(this.value.trim().toLowerCase(), searchResults);
          }
        });
      }

      function performSearch(query, resultsContainer) {
        const searchableContent = [
          // Analyst Commands
          { type: 'command', content: '@analyst brainstorm', description: 'Generate project ideas and market analysis' },
          { type: 'command', content: '@analyst create-project-brief', description: 'Create project brief document' },
          
          // PM Commands  
          { type: 'command', content: '@pm create-doc prd', description: 'Create Product Requirements Document' },
          { type: 'command', content: '@pm brownfield-create-epic', description: 'Create epic for existing project' },
          { type: 'command', content: '@pm brownfield-create-story', description: 'Create single story for existing project' },
          { type: 'command', content: '@pm create-doc brownfield-prd', description: 'Create enhancement PRD for brownfield' },
          
          // UX Expert Commands
          { type: 'command', content: '@ux-expert create-front-end-spec', description: 'Create UI/UX specifications' },
          { type: 'command', content: '@ux-expert generate-ui-prompt', description: 'Generate AI UI prompt for v0 or Lovable' },
          
          // Architect Commands
          { type: 'command', content: '@architect create-doc architecture', description: 'Design technical architecture' },
          { type: 'command', content: '@architect create-doc fullstack-architecture', description: 'Full-stack architecture design' },
          { type: 'command', content: '@architect create-doc front-end-architecture', description: 'Frontend-only architecture' },
          { type: 'command', content: '@architect document-project', description: 'Analyze existing project architecture' },
          { type: 'command', content: '@architect create-doc brownfield-architecture', description: 'Enhancement architecture for brownfield' },
          
          // PO Commands
          { type: 'command', content: '@po execute-checklist-po', description: 'Validate documents with PO checklist' },
          { type: 'command', content: '@po shard docs/prd.md to prd', description: 'Shard PRD into manageable pieces' },
          { type: 'command', content: '@po shard docs/architecture.md to architecture', description: 'Shard architecture document' },
          
          // Development Commands
          { type: 'command', content: '@sm *create', description: 'Create user stories from sharded PRD' },
          { type: 'command', content: '@sm create-next-story', description: 'Create next user story in sequence' },
          { type: 'command', content: '@dev implement-story', description: 'Implement user story with code' },
          { type: 'command', content: '@dev commit-work --story', description: 'Commit implemented story changes' },
          { type: 'command', content: '@qa review-story', description: 'Quality assurance review of story' },
          
          // Agents
          { type: 'agent', content: 'Analyst Agent', description: 'Market research and project analysis' },
          { type: 'agent', content: 'Product Manager', description: 'Requirements and planning' },
          { type: 'agent', content: 'UX Expert', description: 'UI/UX design and specifications' },
          { type: 'agent', content: 'Architect', description: 'Technical architecture and system design' },
          { type: 'agent', content: 'Product Owner', description: 'Document validation and sharding' },
          { type: 'agent', content: 'Scrum Master', description: 'Story creation and management' },
          { type: 'agent', content: 'Developer', description: 'Code implementation' },
          { type: 'agent', content: 'QA Engineer', description: 'Quality assurance and code review' },
          
          // Concepts
          { type: 'concept', content: 'Greenfield', description: 'New project from scratch - full workflow' },
          { type: 'concept', content: 'Brownfield', description: 'Existing project enhancement - three paths' },
          { type: 'concept', content: 'Project Brief', description: 'Problem statement and project scope' },
          { type: 'concept', content: 'PRD', description: 'Product Requirements Document with user stories' },
          { type: 'concept', content: 'Document Sharding', description: 'Breaking documents into manageable pieces for IDE' },
          { type: 'concept', content: 'Context Management', description: 'Clean chat sessions between agent roles' },
          { type: 'concept', content: 'Story Creation', description: 'Converting PRD sections into implementable stories' },
          { type: 'concept', content: 'Blue-Green Deployment', description: 'Zero-downtime deployment strategy' },
          { type: 'concept', content: 'Canary Deployment', description: 'Gradual rollout deployment' }
        ];
        
        const results = searchableContent.filter(item =>
          item.content.toLowerCase().includes(query) ||
          item.description.toLowerCase().includes(query)
        );
        
        if (results.length === 0) {
          resultsContainer.innerHTML = '<div class="search-result-item">No results found</div>';
        } else {
          resultsContainer.innerHTML = results.map(result => `
            <div class="search-result-item" onclick="handleSearchResult('${result.type}', '${result.content.replace(/'/g, "\\'")}')">
              <div class="font-medium text-gray-800 text-sm">${result.content}</div>
              <div class="text-xs text-gray-600">${result.description}</div>
              <div class="text-xs text-blue-600 mt-1 capitalize">${result.type}</div>
            </div>
          `).join('');
        }
        
        resultsContainer.style.display = 'block';
      }

      function handleSearchResult(type, content) {
        if (type === 'command') {
          // Copy command to clipboard
          navigator.clipboard.writeText(content);
          addToCommandHistory(content);
          showNotification(`Command "${content}" copied to clipboard!`, 'success');
        } else {
          showNotification(`Found: ${content}`, 'success');
        }
        
        document.getElementById('search-results').style.display = 'none';
        document.getElementById('search-input').value = '';
      }



      // Notification system
      function showNotification(message, type = 'success') {
        const notification = document.getElementById('notification');
        if (!notification) return;
        
        notification.textContent = message;
        notification.className = `notification ${type === 'error' ? 'error' : ''} show`;
        
        setTimeout(() => {
          notification.classList.remove('show');
        }, 3000);
      }


      // Other event listeners
      document.addEventListener('click', function(e) {
        if (e.target.id === 'clear-history') {
          clearCommandHistory();
        }
      });

      // Initialize everything when DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        // Set default tab
        showMainTab('overview');
        
        // Initialize all features
        initTooltips();
        initMermaid();
        initSearch();
        updateCommandHistoryDisplay();
        updateProgressTracker();
        
        // Load saved state
        const savedTab = localStorage.getItem('bmad-current-tab');
        if (savedTab) {
          showMainTab(savedTab);
        }
        
        console.log('BMAD Interactive Guide initialized successfully');
      });

      // Save current tab state
      window.addEventListener('beforeunload', function() {
        localStorage.setItem('bmad-current-tab', currentMainTab);
      });
    </script>
  </body>
</html>